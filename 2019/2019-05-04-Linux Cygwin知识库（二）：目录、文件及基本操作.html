<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记录分享Cygwin、Linux、编程等计算机技术"><title>Linux Cygwin知识库（二）：目录、文件及基本操作 | silaoA的博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.1"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Linux Cygwin知识库（二）：目录、文件及基本操作</h1><a id="logo" href="/.">silaoA的博客</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Linux Cygwin知识库（二）：目录、文件及基本操作</h1><div class="post-meta">May 4, 2019<span> | </span><span class="category"><a href="/categories/技术/">技术</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0x00-文件相关的概念"><span class="toc-text">0x00 文件相关的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#文件类型"><span class="toc-text">文件类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户与文件属主"><span class="toc-text">用户与文件属主</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件权限"><span class="toc-text">文件权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#案例说明"><span class="toc-text">案例说明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x01-文件操作的命令"><span class="toc-text">0x01 文件操作的命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ls、tree"><span class="toc-text">ls、tree</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cat、head-tail、more-less"><span class="toc-text">cat、head/tail、more/less</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mv"><span class="toc-text">mv</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cp"><span class="toc-text">cp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#touch、mkdir"><span class="toc-text">touch、mkdir</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rm、rmdir"><span class="toc-text">rm、rmdir</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tar"><span class="toc-text">tar</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chown、chgrp"><span class="toc-text">chown、chgrp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chmod"><span class="toc-text">chmod</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x02-小结"><span class="toc-text">0x02 小结</span></a></li></ol></div></div><div class="post-content"><p>本文共5500余字，预计阅读时间18分钟，本文同步发布于知乎（账号silaoA）和微信公众号平台（账号伪码人）。<br>关注学习了解更多的Cygwin、Linux技术。</p>
<p><strong>“一切皆文件”</strong>是UNIX的设计哲学，硬件设备、套接字、目录、程序等都被<strong>抽象</strong>为“文件”，内核提供一套API给用户应用程序（user application），用于操作上述对象，都被抽象为对文件的读写操作，这样设计最大的好处就是<strong>内核可以保持API的一致性，屏蔽对象细节</strong>。Linux、Cygwin自然继承了这一点，用户在使用操作系统过程中实际就是文件操作。</p>
<a id="more"></a>
<!-- [toc] -->
<h1 id="0x00-文件相关的概念"><a href="#0x00-文件相关的概念" class="headerlink" title="0x00 文件相关的概念"></a>0x00 文件相关的概念</h1><h2 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h2><p>Linux将一切抽象为文件，并分为不同的文件类型，主要有常规文件、目录、字符、链接、管道、套接口等，使用<code>ls -l</code>命令查看文件时，属性栏有相应的字符标识文件类型，如下表所示。<br><img src="../pic/Linux常用文件类型.png" alt></p>
<p>对于常规文件，Windows中文件名一般带有后缀，或者叫“扩展名”，文件扩展名<strong>关联</strong>了用于打开此种文件的默认程序，并无更多作用。而Linux中干脆没扩展名这个概念，文件名的后缀只是起标识作用，方便人看，真要查看文件格式，得用<code>file</code>等命令。</p>
<p>对于上面几种文件类型，值得注意的是<strong>目录</strong>（directory），属于特殊文件类型之一，Windows中与之对等的概念是“文件夹”。目录中可以放置任何类型文件，包括目录本身，目录中存放的文件名称，在该目录文件内容里都对应着一个条目（entry），每个目录至少有2个特殊的条目——“.”和“..”，其中“.”指向自身，“..”指向上一层目录，多层目录形成嵌套的<strong>路径</strong>（path）。Linux、UNIX系统中规范了以<strong>根目录（/）</strong>起始的树形目录架构，格式化的磁盘分区挂载在其中某个子目录下；Windows中则是以格式化的磁盘分区为起始，在各分区中形成目录树；<strong>Cygwin根目录（/）</strong>就是Cygwin的安装路径，Windows的各分区默认挂载在<code>/cygdrive</code>目录下，即c盘就是<code>/cygdrive/c</code>、d盘就是<code>/cygdrive/d</code>。</p>
<h2 id="用户与文件属主"><a href="#用户与文件属主" class="headerlink" title="用户与文件属主"></a>用户与文件属主</h2><p>Linux、UNIX是真·多用户系统，允许多个用户同时登录使用，并将用户（user）划分为不同的群组(group)，每个用户有唯一的用户ID（uid）、每个群组有唯一的群组ID（gid）。除了部署Linux、UNIX系统过程中创建的普通用户、群组，系统中还存在一些特殊用户及群组，比如root、admin、nfs、apache等用于执行系统服务，使用不当给系统造成较大破坏。系统中注册了哪些用户和群组，信息保存在<code>/etc/passwd</code>和<code>/etc/group</code>文件中，第1列便是用户名/组名,这两个文件Cygwin中也存在，都是普通文本文件，随便找个文本编辑器，比如记事本，就可以打开。</p>
<p>Windows也有多用户及群组，但只能同时一个用户登录使用，第二个用户登录时自动将第一个用户踢出。对于Cygwin，它并不额外创建用户和群组，而是直接引用Windows系统中用户和群组，登录到Cygwin中Shell的身份即为Windows当前用户。</p>
<p>由于多用户，在系统中就存在由不同用户创建、修改的文件。为安全有效地管理用户和文件，操作系统给文件分配属主，对于某个文件而言，系统中的用户角色可能是所有者（User）、所有者群组（Group）内用户或其他（Other）。</p>
<h2 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h2><p>基于用户角色，Linux、UNIX系统将文件按上述三类角色<strong>独立分配权限</strong>，文件权限包括可读（Read）、可写（Write）和可执行（eXecute）。文件元数据中用3位二进制位图记录这3个权限，1表示有权限、0表示无权限，可读对应Bit2、可写对应Bit1、可执行对应Bit0，即r、w、x权限所在位由高至低排列。User、Group、Other 3种角色<strong>独立分配权限</strong>，共需要3×3=9位二进制。若用数值表示，每组3位二进制数刚好对应1个八进制数，3种角色就是3个八进制数。</p>
<p>用二进制位图记录文件权限，对计算机程序来说是非常简便的，但对于人来说，无论是二进制还是八进制数就都不够直观了。<code>ls -l</code>命令查看文件时，属性栏用r、w、x、-字符描述可读（Read）、可写（Write）、可执行（eXecute）和无权限，如“rwx”表示同时拥有可读、可写和可执行权限，“r-x”表示拥有可读和可执行权限、但没有可写权限；每类角色用户用3个字符即可描述清楚对该文件拥有何种权限，User、Group、Other 3类角色共3×3=9个字符。文件的权限、字符和数值表示，总结如下表。<br><img src="../pic/文件权限字符及数值总结.png" alt></p>
<p>常规文件的可写和可执行权限好理解，但目录文件呢，它的可写和可执行有什么含义？对于目录文件，可读表示可以查看目录本身的信息（存放哪些文件、访问时间等），可写表示可以在该目录下创建/删除文件、修改文件名，可执行表示可以进入(cd)到该目录。</p>
<p>文件权限按角色多重设计，极大地提升了系统的安全性，通过赋予用户特定的身份、“剥夺”用户的某些权限使之不能随意操作系统文件，有效<strong>防止和限制</strong>病毒、恶意程序攻击。Linux系统中，还涉及特殊的sticky位权限，在此不做讨论。</p>
<p>Cygwin未全面移植Linux系统中的权限机制，而是做了简化，但是在外观上看起来和Linux没有太大差异。在FAT文件系统分区中，文件均是可读，Cygwin根据Windows系统函数判断一个文件是否“只读”来进一步是否赋予可写权限，并给扩展名为.bat、.cmd、.com、.exe以及第1行以“#!”开头的文本文件增加可执行权限（注： “#!”在Linux、UNIX系统中是“魔数”(magic number)，其后的内容指示了该文本由哪个程序解释执行。）。而在NTFS文件系统(现在Windows上几乎都是NTFS文件系统分区)中，Cygwin根据Windows系统提供的访问控制列表(Access Control List，ACL)机制来赋予权限。</p>
<h2 id="案例说明"><a href="#案例说明" class="headerlink" title="案例说明"></a>案例说明</h2><p>文件属主、类型、权限都属于文件属性，通过下图解释。使用<code>ls -l</code>命令查看目录ctng-work目录详细信息，含义如下。<br><img src="../pic/ls查看文件属性.png" alt="ls查看文件属性"></p>
<ul>
<li>第1栏有10个字符，其中第1个字符描述类型，后边9个字符描述权限，图中config文件的类型字符是“l”，表示链接文件（link），“rwxrwxrwx”表示User、Group、Other都同时拥有该文件的读、写、执行权限；config.gen文件的类型字符是“d”，表示目录文件（directory），“rwxr-xr-x”表示User拥有该文件的读、写、执行权限，Group拥有该文件的读和执行权限但没有写权限，Other也是拥有该文件的读和执行权限但没有写权限，最后一个“+”暂不详细讨论。</li>
<li>第2栏是硬链接数，删除文件其实是将链接数减1 ，减到0了就真正删除文件内容，暂不详细讨论。</li>
<li>第3、4栏是文件属主及所在群组。</li>
<li>第5栏是文件大小，单位为字节（Byte）。</li>
<li>第6栏是最近访问（修改）时间。</li>
<li>第7栏是文件名，对于符号链接，还加上了其所指向的文件名。</li>
</ul>
<h1 id="0x01-文件操作的命令"><a href="#0x01-文件操作的命令" class="headerlink" title="0x01 文件操作的命令"></a>0x01 文件操作的命令</h1><p>对文件的常用操作不外乎查看、复制、移动、重命名、编辑、压缩/解压、更改属性。</p>
<h2 id="ls、tree"><a href="#ls、tree" class="headerlink" title="ls、tree"></a>ls、tree</h2><p><code>ls</code>是单词list的简写，用于查看文件信息而非文件内容，不指定参数的话，默认参数是“.”，即查看当前目录的信息，如果给定多个参数那就依次列出信息。<code>ls --help</code>输出详尽的用法和选项含义，仅列举几个常用的。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ ls --<span class="built_in">help</span></span><br><span class="line">用法：ls [选项]... [文件]...</span><br><span class="line">List information about the FILEs (the current directory by default).</span><br><span class="line">Sort entries alphabetically <span class="keyword">if</span> none of -cftuvSUX nor --sort is specified.</span><br><span class="line"></span><br><span class="line">必选参数对长短选项同时适用。</span><br><span class="line">  -a, --all                  不隐藏任何以. 开始的项目</span><br><span class="line">  -A, --almost-all           列出除. 及.. 以外的任何项目</span><br><span class="line">      --author               与-l 同时使用时列出每个文件的作者</span><br><span class="line">  -d, --directory            list directories themselves, not their contents</span><br><span class="line">  -l                         使用较长格式列出信息</span><br><span class="line">  -r, --reverse              逆序排列</span><br><span class="line">  -R, --recursive            递归显示子目录</span><br><span class="line">  -S                         sort by file size, largest first</span><br><span class="line">  -t                         sort by modification time, newest first</span><br><span class="line">  -U                         <span class="keyword">do</span> not sort; list entries <span class="keyword">in</span> directory order</span><br></pre></td></tr></table></figure></p>
<p><code>tree</code>用于以树形结构显示目录内容，不指定参数的话，默认参数是“.”，即查看当前目录的内容。<code>tree --help</code>给出了详尽的用法和极多的选项，但一般用<code>-a</code>、<code>-d</code>、<code>-L</code>选项就够用了，其中<code>-a</code>、<code>-d</code>选项与<code>ls</code>命令的<code>-a</code>、<code>-d</code>选项作用一致，<code>-L</code>选项指定显示深度，1只显示目录下的内容，2显示到子目录下的内容，依此类推，默认无限深度。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ tree -ad -L 1 <span class="comment">#显示当前目录下的隐藏文件、仅显示目录（directory），深度为1</span></span><br><span class="line">.</span><br><span class="line">├── .cache</span><br><span class="line">├── .emacs.d</span><br><span class="line">├── .gnupg</span><br><span class="line">├── .ipython</span><br><span class="line">├── .oh-my-zsh</span><br><span class="line">├── .pip</span><br><span class="line">├── .ssh</span><br><span class="line">├── .tldr</span><br><span class="line">├── .zgen</span><br><span class="line">├── .zsh-custom</span><br><span class="line">├── build</span><br><span class="line">├── configure.sh.d</span><br><span class="line">├── dircolors-solarized</span><br><span class="line">└── wget-test</span><br><span class="line"></span><br><span class="line">14 directories</span><br></pre></td></tr></table></figure></p>
<h2 id="cat、head-tail、more-less"><a href="#cat、head-tail、more-less" class="headerlink" title="cat、head/tail、more/less"></a>cat、head/tail、more/less</h2><p><code>cat</code>本质上是文件连接(concatenate，如果学过c语言肯定记得用过<code>strcat</code>函数，此处<code>cat</code>即是这个含义)，根据参数依此把指定的文件内容打印到标准输出<code>stdout</code>，未指定参数的话默认从标准输入<code>stdin</code>读取内容。以下仅列出<code>cat</code>常用几个选项用法。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cat</span> --<span class="built_in">help</span></span><br><span class="line">用法：cat [选项]... [文件]...</span><br><span class="line">将[文件]或标准输入组合输出到标准输出。</span><br><span class="line"></span><br><span class="line">  -A, --show-all           等于-vET</span><br><span class="line">  -b, --number-nonblank    对非空输出行编号</span><br><span class="line">  -e                       等于-vE</span><br><span class="line">  -E, --show-ends          在每行结束处显示<span class="string">"$"</span></span><br><span class="line">  -n, --number             对输出的所有行编号</span><br><span class="line">  -s, --squeeze-blank      不输出多行空行</span><br><span class="line">  -v, --show-nonprinting   使用^ 和M- 引用，除了LFD和 TAB 之外</span><br></pre></td></tr></table></figure></p>
<p><code>head</code>/<code>tail</code>用于查看文本文件头部/尾部的若干行，行数由<code>-n</code>选项指定，默认为10行；<code>head</code>/<code>tail</code>以下几个示例的选项含义相同。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">head -n5 /etc/profile <span class="comment">#查看/etc/profile前5行</span></span><br><span class="line">head -5 /etc/profile  <span class="comment">#与上一行等效，查看/etc/profile前5行</span></span><br><span class="line">head /etc/profile <span class="comment">#查看/etc/profile前10行</span></span><br><span class="line">head -c128 /etc/profile  <span class="comment">#查看/etc/profile前128字节</span></span><br><span class="line">head -c1k /etc/profile  <span class="comment">#查看/etc/profile前1k字节，即1kB</span></span><br></pre></td></tr></table></figure></p>
<p><code>more</code>/<code>less</code>是以分页方式浏览文件内容，通常不需要指定选项，直接用参数指定要看的文件即可；Cygwin中只安装了<code>less</code>，而<code>more</code>只是指向<code>less</code>的链接。<code>more</code>/<code>less</code>中的翻页、查找、退出等操作和<code>man</code>中相同，事实上是<code>man</code>调用了<code>more</code>/<code>less</code>进行这些操作。</p>
<h2 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h2><p><code>mv</code>是单词move的简写，用于文件的重命名和移动，命令最简形式是<code>mv [选项] src dest</code>,把<code>src</code>移动到<code>dest</code>，若<code>src</code>和<code>dest</code>都是常规文件相当于文件重命名，若<code>dest</code>是目录则是把<code>src</code>(无论是文件还是目录)移动到<code>dest</code>之下。<code>-f</code>、<code>-i</code>、<code>-n</code>、<code>-u</code>、<code>-S</code>较常用。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$mv</span> --<span class="built_in">help</span></span><br><span class="line">用法：mv [选项]... [-T] 源文件 目标文件</span><br><span class="line">　或：mv [选项]... 源文件... 目录</span><br><span class="line">　或：mv [选项]... -t 目录 源文件...</span><br><span class="line">Rename SOURCE to DEST, or move SOURCE(s) to DIRECTORY.</span><br><span class="line"></span><br><span class="line">必选参数对长短选项同时适用。</span><br><span class="line">      --backup[=CONTROL]       为每个已存在的目标文件创建备份</span><br><span class="line">  -b                           类似--backup 但不接受参数</span><br><span class="line">  -f, --force                  覆盖前不询问</span><br><span class="line">  -i, --interactive            覆盖前询问</span><br><span class="line">  -n, --no-clobber             不覆盖已存在文件</span><br><span class="line">如果您指定了-i、-f、-n 中的多个，仅最后一个生效。</span><br><span class="line">      --strip-trailing-slashes  去掉每个源文件参数尾部的斜线</span><br><span class="line">  -S, --suffix=SUFFIX           替换常用的备份文件后缀</span><br><span class="line">  -t, --target-directory=DIRECTORY  move all SOURCE arguments into DIRECTORY</span><br><span class="line">  -T, --no-target-directory    treat DEST as a normal file</span><br><span class="line">  -u, --update                 move only when the SOURCE file is newer</span><br><span class="line">                                than the destination file or when the</span><br><span class="line">                                destination file is missing</span><br></pre></td></tr></table></figure></p>
<h2 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h2><p><code>cp</code>是单词copy的简写，用于文件/目录复制，命令形式与<code>mv</code>相同，<code>-f</code>、<code>-i</code>、<code>-n</code>、<code>-u</code>、<code>-S</code>、<code>-T</code>这几个常用选项含义与<code>mv</code>的也相同。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cp /path/of/fileA fileB  <span class="comment">#将/path/of/fileA文件复制一份到当前目录下并重命名为fileB</span></span><br><span class="line">cp -r /path/of/dirA /path/of/dirB   <span class="comment">#将/path/of/dirA“递归”地复制至/path/of/dirB目录下</span></span><br><span class="line">cp -t dest src1 src2 <span class="comment">#将src1、src2依次复制至dest</span></span><br><span class="line">cp -aruv src dest <span class="comment">#将src递归复制至dest，仅复制更新的文件</span></span><br></pre></td></tr></table></figure></p>
<h2 id="touch、mkdir"><a href="#touch、mkdir" class="headerlink" title="touch、mkdir"></a>touch、mkdir</h2><p><code>touch</code>本用于更新指定文件的访问时间，即<strong>触摸</strong>一下，文件不存在的话就是创建新文件。<br><code>mkdir</code>是make directory的简写，用于创建目录，如果常用的选项为<code>-p</code>，即逐层目录按需创建而不是报错，使用时建议带上<code>-p</code>。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /path1/path2/path3 <span class="comment">#要求/path1/path2已存在，不存在则报错</span></span><br><span class="line">mkdir -p /path1/path2/path3 <span class="comment">#逐层创建/path1、/path1/path2、/path1/path2/path3</span></span><br></pre></td></tr></table></figure></p>
<h2 id="rm、rmdir"><a href="#rm、rmdir" class="headerlink" title="rm、rmdir"></a>rm、rmdir</h2><p><code>rm</code>是单词remove的简写，<code>rmdir</code>是remove directory的简写，用于删除文件/目录，但<code>rmdir</code>只能删除空目录，所以更常用<code>rm</code>。<code>rm</code>常用选项包括<code>-r</code>、<code>-f</code>、<code>-i</code>。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rm /dirA/fileA /dirB/fileB /dirC <span class="comment">#删除fileA、fileB，但不能删除目录/dirC</span></span><br><span class="line">rm -r /dirC <span class="comment">#递归删除/dirC目录下文件、子目录的所有内容</span></span><br><span class="line">rm -r -i somefile somedir <span class="comment">#每次删除前提示等待确认（interactively）</span></span><br><span class="line">rm -r -f somefile somedir <span class="comment">#强制删除（forcely）无提示</span></span><br></pre></td></tr></table></figure></p>
<p><code>rm -fr</code><strong>威力过于强大，使用需谨慎</strong>，Linux、UNIX没有回收站，删除后文件无法找回（使用磁盘恢复等特殊手段除外）。涉及到比较长的路径，如果中间手误多打了空格，比如<code>rm -fr /x/y/z</code>误写为<code>rm -fr / x/y/z</code>，含义就是强制删除根目录“/”和子目录“x/y/z”，删除了根目录“/”系统就彻底凉凉了。要避免手动误敲，在Shell中要多按<code>TAB</code>键自动补全和提示。还有个比较隐藏的危险，就是在脚本中使用变量未检查空值，如<code>var1=$PATH_TEMP/</code>，结果脚本在运行过程<code>$PATH_TEMP</code>值始终为空，执行<code>rm -rf $var1</code>就相当于<code>rm -rf /</code>。</p>
<p>以上各种误操作，即便不是删除根目录“/”，误删<code>/bin</code>、<code>/usr</code>、<code>/sbin</code>等重要目录也同样会让系统崩溃无法恢复。</p>
<h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><p><code>tar</code>是tape archive(磁带归档)的简写，用于归档和解归档，配合<code>-j</code>、<code>-z</code>、<code>-J</code>选项可以进一步调用压缩/解压缩程序采取进一步动作。需要强调的是<strong>归档文件不是压缩文件！</strong>归档只是把多个文件打包，并未压缩，通常以“.tar”做文件名后缀，方便识别。文件经压缩程序压缩才是压缩文件，不同压缩程序采用的算法不同，形成不同的压缩格式，主流的压缩程序有<code>bzip2</code>、<code>gzip</code>、<code>xz</code>/<code>lzma</code>/<code>lzip</code>/<code>lzop</code>，形成的文件名后缀相应是“.bz2”、“.gz”、“.xz/lzma/lzip/lzop”。</p>
<p><code>tar</code>支持的选项极多，仅以几例说明。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tar -cvf /tmp/etc.tar /etc <span class="comment">#等效为tar -cv -f /tmp/etc.tar /etc，将/etc 目录下的文件全部打包成为/tmp/etc.tar</span></span><br><span class="line">tar -xf some.tar <span class="comment">#等效为tar -x -f some.tar，将some.tar解包至当前目录下</span></span><br><span class="line">tar -xf some.tar -C dest/ <span class="comment">#将some.tar解包至dest目录下</span></span><br><span class="line">tar -tvf some.tar <span class="comment">#查看some.tar中归档的文件、子目录</span></span><br><span class="line"><span class="comment">#`-c`含义为创建（create）tar文件，`-f`指示tar文件名（filename），`-x`意为提取（extract），`-t`意为列出（list），`-v`意为输出中间过程</span></span><br><span class="line"></span><br><span class="line">tar -zcvf /tmp/etc.tar.gz /etc <span class="comment">#将/etc目录下的文件全部打包再调用gzip压缩为/tmp/etc.tar.gz</span></span><br><span class="line">tar -zxvf /tmp/etc.tar.gz -C dest/ <span class="comment">#调用gzip将/tmp/etc.tar.gz解压，再将归档文件 解包至dest目录下</span></span><br><span class="line"><span class="comment">#`-z`关联`gzip`进行压缩/解压缩动作，`-j`关联`bzip2`，`-J`关联`xz`/`lzma`/`lzip`/`lzop`</span></span><br></pre></td></tr></table></figure></p>
<h2 id="chown、chgrp"><a href="#chown、chgrp" class="headerlink" title="chown、chgrp"></a>chown、chgrp</h2><p><code>chown</code>是change owner的简写，<code>chgrp</code>是change group的简写，二者用于更改文件的属主/属组。<code>chown</code>命令形式为<code>chown [选项]... [所有者][:[组]] 文件...</code>，<code>chgrp</code>命令形式为<code>chgrp [选项]... 用户组 文件...</code>，以下仅以常见用法示例。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chown root somefile <span class="comment">#将somefile文件属主更改为root</span></span><br><span class="line">chown -R user1:group1 somedir <span class="comment">#将somedir目录及子目录下所有文件属主递归地更改为group1组中的user1用户</span></span><br><span class="line">chgrp group1 somefile <span class="comment">#将somefile文件属组更改为group1</span></span><br><span class="line">chgrp group1 somedir <span class="comment">#将somedir目录及子目录下所有文件属组递归地更改为group1</span></span><br></pre></td></tr></table></figure></p>
<h2 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h2><p><code>chmod</code>是change mode的简写，用于更改文件权限。<code>chmod</code>命令形式为<code>chmod [选项] 模式 文件...</code>，特别是模式支持的形式灵活多变，以下仅以几例说明。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">chmod 640 fileX <span class="comment"># 设置user对fileX的权限为rw，group的权限为r，other的权限为空</span></span><br><span class="line">chmod 777 fileX <span class="comment"># 设置user、group、other对fileX的权限均为rwx</span></span><br><span class="line">chmod a=rwx fileX <span class="comment"># 与上等效，设置所有人（all）对fileX的权限均为rwx</span></span><br><span class="line">chmod u=rwx fileX <span class="comment"># 设置user对fileX的权限为rwx，group、other权限不变</span></span><br><span class="line">chmod u=rwx,go=r fileX <span class="comment"># 设置user对fileX的权限为rwx，group、other的权限为r</span></span><br><span class="line">chmod u=rwx,g=rx,o=r fileX <span class="comment"># 设置user对fileX的权限为rwx，group的权限为rx，other的权限为r</span></span><br><span class="line">chmod ug+x fileX <span class="comment"># 同时增加user、group的x权限，其余权限不变</span></span><br><span class="line">chmod a+x fileX <span class="comment"># 增加所有人（all）对fileX的x权限</span></span><br><span class="line">chmod o-wx fileX <span class="comment"># 取消other对fileX的w和x权限，其余权限不变</span></span><br><span class="line">chmod -R a+x dirX <span class="comment"># 递归地增加所有人（all）对dirX目录及子目录所有文件的x权限</span></span><br></pre></td></tr></table></figure></p>
<p>注意以上命令中，模式既有八进制数字形式，也有rwx的形式，无论哪种形式<strong>模式表达式内部不应有空格隔开</strong>。</p>
<h1 id="0x02-小结"><a href="#0x02-小结" class="headerlink" title="0x02 小结"></a>0x02 小结</h1><p>本文仅简单介绍了文件相关的几个概念和几个命令，更多详情需要参阅Linux系统相关教程，更多的命令需要在实践中逐步积累，不记得用法的时候尝试<code>--help</code>选项以及<code>man</code>、<code>info</code>命令。</p>
<hr>
<p><strong>如本文对你有帮助，或内容引起极度舒适，欢迎分享转发或点击下方捐赠按钮打赏</strong> ^_^</p>
</div><iframe src="/donate/?AliPayQR=/pic/AliPayQR.jpg&amp;WeChatQR=/pic/WeChatQR.png&amp;GitHub=https://github.com/Kaiyuan/donate-page&amp;BTCQR=undefined&amp;BTCKEY=undefined&amp;PayPal=undefined" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>silaoA</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2019/2019-05-04-Linux Cygwin知识库（二）：目录、文件及基本操作.html">https://silaoa.github.io/2019/2019-05-04-Linux Cygwin知识库（二）：目录、文件及基本操作.html</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本文为原创文章，如需转载，请联系stsilaoa@gmail.com 或 公众号 伪码人 或知乎私信 silaoA。</li></ul></div><br><div class="tags"><a href="/tags/Cygwin/">Cygwin</a><a href="/tags/Linux/">Linux</a><a href="/tags/Windows/">Windows</a></div><div class="post-nav"><a class="pre" href="/2019/2019-05-05-IEEE-Spectrum-20190415-为太空而生的充气机器人.html">IEEE-Spectrum-20190415-为太空而生的充气机器人</a><a class="next" href="/2019/2019-04-18-hexo-github-pages建博客站全过程记录.html">hexo+github pages搭建博客站全过程记录</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://silaoa.github.io"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">18</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/机器人/" style="font-size: 15px;">机器人</a> <a href="/tags/Cygwin/" style="font-size: 15px;">Cygwin</a> <a href="/tags/Windows/" style="font-size: 15px;">Windows</a> <a href="/tags/Web/" style="font-size: 15px;">Web</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/IEEE/" style="font-size: 15px;">IEEE</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/科技/" style="font-size: 15px;">科技</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/博客/" style="font-size: 15px;">博客</a> <a href="/tags/WSL/" style="font-size: 15px;">WSL</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/2019-08-15-Python项目如何合理组织规避import天坑.html">Python项目如何合理组织规避import天坑</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/2019-06-16-Cygwin系列（九）：Cygwin学习路线.html">Cygwin系列（九）：Cygwin学习路线</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/2019-05-25-Cygwin系列（八）：命令行软件包管理器apt-cyg.html">Cygwin系列（八）：命令行软件包管理器apt-cyg</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/2019-05-12-Cygwin系列（七）：Cygwin软件包管理相关配置.html">Cygwin系列（七）：Cygwin软件包管理相关配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/2019-05-08-微软WSL——Linux桌面未来之光.html">微软WSL——Linux桌面版未来之光</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/2019-05-05-IEEE-Spectrum-20190415-为太空而生的充气机器人.html">IEEE-Spectrum-20190415-为太空而生的充气机器人</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/2019-05-04-Linux Cygwin知识库（二）：目录、文件及基本操作.html">Linux Cygwin知识库（二）：目录、文件及基本操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/2019-04-18-hexo-github-pages建博客站全过程记录.html">hexo+github pages搭建博客站全过程记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/2019-04-10-使用hexo写博客.html">使用hexo写博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/2019-04-04-Linux Cygwin知识库（一）：一文搞清控制台、终端、shell概念.html">Linux Cygwin知识库（一）：一文搞清控制台、终端、shell概念</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://silaoa.github.io" title="silaoA的网络日志" target="_blank">silaoA的网络日志</a><ul></ul><a href="http://www.zhihu.com/people/laoa-si/posts" title="silaoA的知乎文章" target="_blank">silaoA的知乎文章</a><ul></ul><a title="微信公众号：伪码人（We_Coder）" target="_blank">微信公众号：伪码人（We_Coder）</a><ul></ul><a title="QQ交流群：374791536" target="_blank">QQ交流群：374791536</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">silaoA的博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.1" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.1"></script></div></body></html>